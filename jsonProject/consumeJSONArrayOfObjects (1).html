<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>WDV321 Advanced Javascript - JSON</title>
<script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
  crossorigin="anonymous"></script>

<!--
    
    Instructions:
    	1. Incorporate the createJSONArray.js file into this page as an external javascript file.
        2. Access the JSON object in local storage and convert it into a javascript object.
        3. Use the information in the object to complete a student card for EACH student object.
        4. Account for the fact that there could be a random number of student objects. 
        5. Use Jquery commands whenever possible.  
-->

<style>
	.studentCard	{
		width:50%;
		box-sizing:border-box;
		background-color:lightblue;
		padding-left:5px;
		padding-top:3px;
		border:thin solid blue;
		box-shadow: 2px 2px 2px grey;		
		margin: 10px;
	}
	
	.studentCard h3	{
		margin:10px;	
	}
</style>

<script src="createJSONArray.js"></script>

<script>


	function getStudents() {
		let studentsJS = localStorage.getItem("students");
		let studentsParse = JSON.parse(studentsJS);

		for (i=0; i<studentsParse.length; i++) {
			let temp = document.getElementsByTagName("template")[0];
			let clone = temp.content.cloneNode(true);
			clone.querySelector("#id").innerText = studentsParse[i].student_id;
			clone.querySelector("#gpa").innerText = studentsParse[i].student_gpa;	

			let studentCourses = studentsParse[i].student_courses;

				for (x=0; x<studentCourses.length; x++) {
					clone.querySelector("#courses").innerHTML += 
					"<li>" + studentsParse[i].student_courses[x] + "</li>";
				}

				document.body.appendChild(clone);
		}
	}	

</script>


</head>

<body>
	<h1>WDV321 Advanced Javascript</h1>
    <h2>Unit-8 JSON Objects</h2>
    <h3>Creating and consuming a JSON object</h3>

	<button onclick="getStudents()">student array of objects</button>

			<template>
				<div class="studentCard">
					<h3>Student ID: <span id="id"></span></h3>
					<p>Student GPA: <span id="gpa"></span></p>
					<p>Student Courses:
						<ul id="courses">
						</ul>
					</p>  
				</div>    
			</template>
</body>
</html>
